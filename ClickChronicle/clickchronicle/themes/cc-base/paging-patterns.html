<html xmlns="http://www.w3.org/1999/xhtml" xmlns:nevow="http://nevow.com/ns/nevow/0.1">

  <!-- onclick handlers and tooltips will be added to these actions by javascript -->
  <span nevow:pattern="clickActions" style="text-align: center">
    <a class="info-action">
      <nevow:attr name="href"><nevow:slot name="identifier"/></nevow:attr>
      <img src="/static/images/info.png" class="linkIcon"/>
    </a>
    <a class="ignore-action">
      <nevow:attr name="href"><nevow:slot name="identifier"/></nevow:attr>
      <img src="/static/images/ignore_link.png" class="linkIcon"/>
    </a>
    <a class="bookmark-action">
      <nevow:attr name="href"><nevow:slot name="identifier"/></nevow:attr>
      <img src="/static/images/bookmark.png" class="linkIcon"/>
    </a>
    <a class="delete-action">
      <nevow:attr name="href"><nevow:slot name="identifier"/></nevow:attr>
      <img src="/static/images/delete.png" class="linkIcon"/>
    </a>
  </span>

  <table nevow:pattern="visitInfo" style="width: 80%">
    <tr valign="top">
      <td style="width: 100%">
        <table cellspacing="0" class="thinFancyTable" nevow:render="sequence">
          <tr nevow:pattern="item" nevow:render="sequence">
            <td class="fancyRowHeader" nevow:pattern="item" nevow:render="data"/>
            <td class="fancyCell" nevow:pattern="item" nevow:render="data"/>
          </tr>
        </table>
      </td>
    </tr>
  </table>

  <table cellspacing="0" id="clickTable" class="fancyTable" nevow:pattern="clickTable" nevow:render="sequence">
    <!-- js will unhide and fill me will an instance of the visitInfo pattern if the relevant button is clicked -->
    <tr style="display: none" nevow:pattern="divider">
      <td style="border-bottom: solid 1px #B0B0B0" colspan="4" class="content"/>
    </tr>

    <!-- duplicate the "divider" pattern as "footer" so it shows after the last click also -->
    <tr style="display: none" nevow:pattern="footer">
      <td style="border-bottom: solid 1px #B0B0B0" colspan="4" class="content"/>
    </tr>

    <tr class="fancyRowFirst" nevow:pattern="header">
      <td style="text-align: center; width: 20%" class="fancyCol">
        Timestamp
      </td>
      <td class="fancyCol">
        Link
      </td>
      <td class="fancyCol" style="text-align: center; width: 10%">
        Action
      </td>
      <td class="lastFancyCol" style="width: 10%">
        Visits
      </td>
    </tr>

    <tr class="fancyRowAlt" nevow:pattern="item" nevow:render="mapping">
      <nevow:attr name="id"><nevow:slot name="identifier"/></nevow:attr>
      <td class="fancyCol" style="text-align: center;"><nevow:slot name="timestamp"/></td>
      <td class="fancyCol">
        <img class="linkIcon" width="16" height="16"><nevow:attr name="src"><nevow:slot name="icon"/></nevow:attr></img>
        <a><nevow:attr name="href"><nevow:slot name="url"/></nevow:attr><nevow:slot name="title"/></a>
      </td>
      <td class="fancyCol" style="text-align: center">
        <nevow:slot name="clickActions"/>
      </td>
      <td class="lastFancyCol" style="text-align: center"><nevow:slot name="visitCount"/></td>
    </tr>

    <tr class="fancyRow" nevow:pattern="item" nevow:render="mapping">
      <nevow:attr name="id"><nevow:slot name="identifier"/></nevow:attr>
      <td class="fancyCol" style="text-align: center"><nevow:slot name="timestamp"/></td>
      <td class="fancyCol">
        <img class="linkIcon" width="16" height="16"><nevow:attr name="src"><nevow:slot name="icon"/></nevow:attr></img>
        <a><nevow:attr name="href"><nevow:slot name="url"/></nevow:attr><nevow:slot name="title"/></a>
      </td>
      <td class="fancyCol" style="text-align: center">
        <nevow:slot name="clickActions"/>
      </td>
      <td class="lastFancyCol" style="text-align: center"><nevow:slot name="visitCount"/></td>
    </tr>
  </table>

  <table cellspacing="0" id="clickTable" class="fancyTable" nevow:pattern="sortableClickTable" nevow:render="sequence">
    <tr style="display: none" nevow:pattern="divider">
      <td style="border-bottom: solid 1px #B0B0B0" colspan="4" class="content"/>
    </tr>

    <!-- duplicate the "divider" pattern as "footer" so it shows after the last click also -->
    <tr style="display: none" nevow:pattern="footer">
      <td style="border-bottom: solid 1px #B0B0B0" colspan="4" class="content"/>
    </tr>

    <tr class="fancyRowFirst" nevow:pattern="header">
      <td style="text-align: center; width: 20%;" class="sFancyCol" id="sortcol_timestamp" onclick="toggleSort('timestamp')">
        Timestamp
      </td>
      <td class="sFancyCol" id="sortcol_url" onclick="toggleSort('url')">
        Link
      </td>
      <td class="fancyCol" style="text-align: center; width: 10%">Action</td>
      <td class="sLastFancyCol" id="sortcol_visitCount" style="text-align: center; width: 10%"
        onclick="toggleSort('visitCount')">
        Visits
      </td>
    </tr>

    <tr class="fancyRowAlt" nevow:pattern="item" nevow:render="mapping">
      <nevow:attr name="id"><nevow:slot name="identifier"/></nevow:attr>
      <td class="fancyCol" style="text-align: center;" id="sortcol_timestamp"><nevow:slot name="timestamp"/></td>
      <td class="fancyCol">
        <img class="linkIcon" width="16" height="16"><nevow:attr name="src"><nevow:slot name="icon"/></nevow:attr></img>
        <a><nevow:attr name="href"><nevow:slot name="url"/></nevow:attr><nevow:slot name="title"/></a>
      </td>
      <td class="fancyCol" style="text-align: center">
        <nevow:slot name="clickActions"/>
      </td>
      <td class="lastFancyCol" style="text-align: center"><nevow:slot name="visitCount"/></td>
    </tr>

    <tr class="fancyRow" nevow:pattern="item" nevow:render="mapping">
      <nevow:attr name="id"><nevow:slot name="identifier"/></nevow:attr>
      <td class="fancyCol" style="text-align: center"><nevow:slot name="timestamp"/></td>
      <td class="fancyCol">
        <img class="linkIcon" width="16" height="16"><nevow:attr name="src"><nevow:slot name="icon"/></nevow:attr></img>
        <a><nevow:attr name="href"><nevow:slot name="url"/></nevow:attr><nevow:slot name="title"/></a>
      </td>
      <td class="fancyCol" style="text-align: center">
        <nevow:slot name="clickActions"/>
      </td>
      <td class="lastFancyCol" style="text-align: center"><nevow:slot name="visitCount"/></td>
    </tr>
  </table>

  <select onchange="updateTable()" id="pages"
    nevow:pattern="pagingWidget" nevow:render="sequence">
    <option nevow:pattern="item" nevow:render="data"/>
  </select>

  <table id="navTable" style="width: 100%" cellspacing="0" nevow:pattern="navBar">
    <tr class="navRow" valign="middle">
      <td style="padding: 4px">
        <img id="first" style="display: none;" src="/static/images/first.png" onclick="goFirst()"/>
        <img id="first_disabled" src="/static/images/first_disabled.png"/>

        <img id="prev" style="display: none;" src="/static/images/prev.png" onclick="goPrev()"/>
        <img id="prev_disabled" src="/static/images/prev_disabled.png"/>

        <img id="next" style="display: none;" src="/static/images/next.png" onclick="goNext()"/>
        <img id="next_disabled" src="/static/images/next_disabled.png"/>

        <img id="last" style="display: none;" src="/static/images/last.png" onclick="goLast()"/>
        <img id="last_disabled" src="/static/images/last_disabled.png"/>

      </td>
      <td>
        <span id="completionDialog" class="completionDialog"/>
      </td>
      <td style="text-align: right; padding: 4px;">
        page: <span id="pagingWidgetContainer"><nevow:slot name="pagingWidget"/></span>
      </td>
    </tr>
  </table>

</html>
