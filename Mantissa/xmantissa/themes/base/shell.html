<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns:nevow="http://nevow.com/ns/nevow/0.1">

  <a href="#" nevow:pattern="search"
    onclick="MantissaShell.searchButtonClicked(this); return false"
    id="search-button"
    ><img src="/Mantissa/images/search-button-unselected.png" border="0" />
  </a>

  <div nevow:pattern="app-tab" class="tab-button">
    <nevow:slot name="tab-contents" />
  </div>

  <div nevow:pattern="selected-app-tab" class="selected-tab-button">
    <nevow:slot name="tab-contents" />
  </div>

  <li nevow:pattern="tab">
    <a class="tab-link"
      onmouseover="MantissaShell.tabHover(this)"
      onmouseout="MantissaShell.tabUnhover(this)">
      <nevow:attr name="href"><nevow:slot name="href" /></nevow:attr>
      <nevow:slot name="name" />
    </a>
    <nevow:slot name="kids" />
  </li>

  <ul nevow:pattern="subtabs" class="subtabs" style="display: none"
    onmouseover="MantissaShell.subtabHover(this)">
    <nevow:slot name="kids" />
  </ul>

  <table nevow:pattern="selected-tab-contents" cellpadding="0" cellspacing="0">
    <tr class="tab-button-row">
      <td class="tab-tl-corner" />
      <td class="tab-top-edge" />
      <td class="tab-tr-corner" />
    </tr>
    <tr class="tab-text-row">
      <td class="tab-left-edge" />
      <td class="tab-text-cell">
	      <div>
          <a onmouseover="MantissaShell.tabHover(this)"
            onmouseout="MantissaShell.tabUnhover(this)">
            <nevow:attr name="href"><nevow:slot name="href" /></nevow:attr>
            <nevow:slot name="name" />
          </a>
        </div>
      </td>
      <td class="tab-right-edge" />
    </tr>
  </table>

  <table nevow:pattern="tab-contents" cellpadding="0" cellspacing="0">
    <tr class="tab-button-row">
      <td class="tab-tl-corner" />
      <td class="tab-top-edge" />
      <td class="tab-tr-corner" />
    </tr>
    <tr class="tab-text-row">
      <td class="tab-left-edge" />
      <td class="tab-text-cell">
        <a onmouseover="MantissaShell.tabHover(this)"
          onmouseout="MantissaShell.tabUnhover(this)">
          <nevow:attr name="href"><nevow:slot name="href" /></nevow:attr>
          <nevow:slot name="name" />
        </a>
      </td>
      <td class="tab-right-edge" />
    </tr>
    <tr class="tab-button-row">
      <td class="tab-bl-corner" />
      <td class="tab-bottom-edge" />
      <td class="tab-br-corner" />
    </tr>
  </table>

  <head nevow:render="head">
    <title nevow:render="title" />
    <script type="text/javascript" src="/Mantissa/js/shell.js"></script>
  </head>

  <body>
    <table class="mantissa-menubar" style="width: 100%" cellpadding="0" cellspacing="0">
      <thead />
      <tbody>
        <tr valign="bottom">
          <td class="divmod-menu-container"
            onclick="MantissaShell.menuClick(this);">
            <div class="divmod-menu-icon" onmouseover="MantissaShell.menuButtonHover()" />
            <ul id="divmod-menu" style="display: none">
              <nevow:invisible nevow:render="navigation" />
              <li><div class="menu-separator" /></li>
              <li class="tab">
                <a class="tab-link">
                  <nevow:attr name="href" nevow:data="settingsLink" nevow:render="data" />
                  Settings
                </a>
              </li>
              <li><div class="menu-separator" /></li>
              <li class="tab">
                <a class="tab-link" href="/__logout__">Logout</a>
              </li>
            </ul>
          </td>
          <td class="app-nav-container" >
            <nevow:invisible nevow:render="appNavigation" />
          </td>
          <td class="search-container" align="right">
            <table cellpadding="0" cellspacing="0" style="height: 100%">
              <thead />
              <tbody>
                <tr valign="center">
                  <td>
                    <span class="username">
                      <nevow:invisible nevow:render="username" />
                    </span>
                  </td>
                  <td>
                    <nevow:invisible nevow:render="search" />
                  </td>
                </tr>
              </tbody>
              <tfoot />
            </table>
          </td>
        </tr>
      </tbody>
      <tfoot />
    </table>

    <form id="search-form" nevow:render="searchFormAction" style="display: none">
      <nevow:attr name="action"><nevow:slot name="form-action" /></nevow:attr>
      <table>
        <tr valign="center">
          <td>
            <input name="term" class="search-text" type="text" />
          </td>
          <td>
            <a href="#" onclick="document.forms['search-form'].submit(); return false">
              <img src="/Mantissa/images/search-button-small.png" border="0" />
            </a>
          </td>
        </tr>
      </table>
    </form>

    <div class="private-fragment-content" nevow:render="content" />

    <div id="mantissa-footer" nevow:render="footer" />

  </body>

</html>
