<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns:nevow="http://nevow.com/ns/nevow/0.1">
    <head>
        <title>
            Nevow Chatola
        </title>
        <script type="text/javascript">
function focusInput() {
    var il = document.inputForm.inputLine;
    il.focus();
    il.value = '';
    scrollDown();
}

function scrollDown() {
    var bottom = document.getElementById('bottom')
    if (bottom.scrollIntoView) {
        bottom.scrollIntoView()
    } else {
        window.scrollTo(0, 9999999);
    }
}

function removeNode(nodeId) {
    var node = window.document.getElementById(nodeId);
    node.parentNode.removeChild(node);
}

function changeId(old, newe) {
    window.document.getElementById(old).id = newe;
}
        </script>
        <style type="text/css">
body { font-family: Verdana, sans-serif; margin: 0px; padding: 0px }
.userid { font-weight: bold; margin-right: 15px }
.message { font-size: small }
.timestamp { float: right; font-size: x-small; }

#topic,#content { padding: 0.5em }
form { padding-left: 10px }

#topic { background-color: #efefef; 
    position: fixed; top: 0px; left: 0px; right: 0px; height: 1.5em; overflow: auto; }
#content { margin-top: 2em; margin-right: 230px; }
#nick-change-notification { margin-left: 15px; }

#userlist {
    position: fixed; top: 1.5em; right: 0px; bottom: 0px; width: 200px;
    background-color: efefef; padding: 15px; }
#userlist dt { font-weight: bold }
#userlist dd { margin: 0px; padding: 0px; }

        </style>
    </head>
    <body>
        <div id="topic" />
        <div id="content">
            <div nevow:pattern="message">
                <span class="timestamp"><nevow:slot name="timestamp" /></span>
                <span class="userid"><nevow:slot name="userid" /></span>
                <span class="message"><nevow:slot name="message" /></span>
            </div>
        </div>
        <dl id="userlist">
            <dt>Userlist</dt>
            <dd class="user" nevow:pattern="user">
                <nevow:attr name="id">user-list-<nevow:slot name="user-id" /></nevow:attr>
                <nevow:slot name="user-id" />
            </dd>
        </dl>
        <form name="inputForm" onsubmit="server.handle('sendInput', this.inputLine.value); return false;">
          <input name="inputLine" />
          <input type="submit" value="say" />
        </form>
        <form name="nickForm" onsubmit="server.handle('changeNick', this.nick.value); return false;">
          <input name="nick" />
          <input type="submit" value="change nick" />
        </form>
        <form name="topicForm" onsubmit="server.handle('changeTopic', this.topic.value); return false;" >
            <input name="topic" />
            <input type="submit" value="change topic" />
        </form>
        <span nevow:render="liveglue" />
        <span id="bottom" />
    </body>
</html>
