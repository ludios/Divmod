<div xmlns:nevow="http://nevow.com/ns/nevow/0.1" nevow:render="liveFragment"
  class="message-detail-fragment">

  <nevow:invisible nevow:render="printableLink" />

  <div nevow:render="headerPanel" style="margin-bottom: 14px">
    <table style="width: 100%">
      <tr valign="top">
        <td>
          <div style="font-size: 1.3em; font-weight: bold"><nevow:slot name="subject" /></div>
        </td>
        <td align="right" style="white-space: nowrap">
          <nevow:slot name="sent" />
        </td>
      </tr>
    </table>

    <div style="background-color: #FFFFFF; padding: 4px; margin: 4px; float: left; border: solid 2px #ECF0DA">
      <nevow:slot name="sender" />
    </div>
    <div style="clear: both; height: 1px">&#160;</div>
  </div>

  <div class="tags-container">
    <table>
      <tr>
        <td>
          <b>Tags</b>:
        </td>
        <td>
          <span class="tags-display-container"
            ><span class="tags-display"
              ><nevow:invisible nevow:render="tags" /></span>
            (<a href="#" onclick="Quotient.Mailbox.MessageDetail.get(this).editTags(); return false">Edit</a>)
          </span>

          <form style="display: none;" class="edit-tags-container"
            onsubmit="Quotient.Mailbox.MessageDetail.get(this).saveTags(); return false">
            <input class="add-tags-dialog-text-input" type="text" name="tags" size="38" />
            <a href="#" onclick="Quotient.Mailbox.MessageDetail.get(this).saveTags(); return false">Save</a>
            <a href="#" onclick="Quotient.Mailbox.MessageDetail.get(this).hideTagEditor(); return false">Cancel</a>
          </form>
        </td>
      </tr>
    </table>
  </div>

  <div nevow:render="attachmentPanel" style="float: right" />
  <div class="message-body" nevow:render="messageBody">
    <nevow:slot name="paragraphs" />
  </div>
  <nevow:invisible nevow:render="imagePanel" />
  <div class="message-source-container">
    <nevow:invisible nevow:render="messageSourceLink" />
  </div>
</div>
